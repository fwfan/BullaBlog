{"version":3,"sources":["pages/Home/Tag.js","pages/Home/CodeBlock.js","pages/Home/Article.js","pages/Home/ListItem.js","redux/actionTypes.js","pages/Home/Announcement.js","components/LoadingTips.js","pages/Home/Home.js","components/ScrollDiv.js","pages/About/About.js","pages/Article/ArticleCon.js","pages/Life/Life.js","App.js","serviceWorker.js","redux/fetchReducer.js","redux/homePageNumReducer.js","redux/store.js","index.js"],"names":["Tag","props","state","tags","this","className","map","item","key","Component","CodeBlock","SyntaxHighlighter","registerLanguage","jsx","javascript","language","value","style","darcula","PureComponent","defaultProps","Article","article","source","renderers","code","ListItem","title","time","article_sub","detailStyle","detailA","display","href","window","location","target","BEFORE_FETCH","FETCH_FAIL","FETCH_SUCCESS","MODIFY_HOME_PAGENUM","Announcement","padding","textAlign","fontWeight","width","height","LoadingTips","loadState","getLoadingStringState","bind","index","Home","homeContent","pageNum","lastScrollTime","scrollHandler","fetchContent","conHeight","$","winHeight","scrollTop","curTime","Date","url","start","setState","fetch","method","then","res","json","data","result","length","num","console","log","removeEventListener","addEventListener","uid","upload_time","split","id","ScrollDiv","clientHeight","document","documentElement","clientWidth","scrollTime","containerStyle","border","overflow","overflowX","wordBreak","About","ArticleCon","App","navHide","hash","indexOf","position","backgroundColor","top","zIndex","boxShadow","to","exact","saveScrollPosition","path","Boolean","hostname","match","initializeState","fetchReducer","action","type","initialHomePageNum","pageReducer","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","isProduct","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a70444c6.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Tag extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    render(){\r\n        const { tags } = this.props;\r\n        return (\r\n            <div className=\"list-item-tag-container\"> 标签：\r\n                {tags.map(item => <span key={item} className=\"list-item-tag\">{item}</span>)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Tag","import React, { PureComponent } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { PrismLight as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\n// 设置高亮样式\r\nimport { darcula } from \"react-syntax-highlighter/dist/esm/styles/prism\";\r\n// 设置高亮的语言\r\nimport { jsx, javascript} from \"react-syntax-highlighter/dist/esm/languages/prism\";\r\n\r\nclass CodeBlock extends PureComponent {\r\n    static propTypes = {\r\n        value: PropTypes.string.isRequired,\r\n        language: PropTypes.string\r\n    };\r\n\r\n    static defaultProps = {\r\n        language: null\r\n    };\r\n\r\n    componentDidMount() {\r\n        // 注册要高亮的语法，\r\n        // 注意：如果不设置打包后供第三方使用是不起作用的\r\n         SyntaxHighlighter.registerLanguage(\"jsx\", jsx);\r\n         SyntaxHighlighter.registerLanguage(\"javascript\", javascript);\r\n    }\r\n\r\n    render() {\r\n        const { language, value } = this.props;\r\n        return (\r\n            <figure className=\"highlight\">\r\n                <SyntaxHighlighter language={language} style={darcula}>\r\n                    {value}\r\n                </SyntaxHighlighter>\r\n            </figure>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CodeBlock;\r\n","import React, { Component } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport CodeBlock from './CodeBlock.js';\r\n\r\nclass Article extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { article} = this.props;\r\n        \r\n        return(\r\n            <div>\r\n                <ReactMarkdown source={article} renderers={{\r\n                    code: CodeBlock\r\n                }}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Article;\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Tag from './Tag.js'\r\nimport Article from './Article.js';\r\n\r\nclass ListItem extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { title, time, tags, article_sub, detailA } = this.props;\r\n        let detailStyle = detailA ? {\r\n            display: 'inline-block'\r\n        } : {\r\n                display: 'none'\r\n            }\r\n        return (\r\n            <div className=\"list-item\">\r\n                <h3>{title}</h3>\r\n                <Tag tags={tags} />\r\n                <div className=\"list-item-time-container\">{time}</div>\r\n                <Article article={article_sub} />\r\n                <a style={detailStyle} href={window.location.href + \"article\" + \"?uid=22\"} target='_blank'>[查看详情]</a>\r\n                <hr />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ListItem;","\r\nexport const BEFORE_FETCH = 'BEFORE_FETCH';\r\nexport const FETCH_FAIL = 'FETCH_FAIL';\r\nexport const FETCH_SUCCESS = 'FETCH_SUCCESS';\r\nexport const MODIFY_HOME_PAGENUM = 'MODIFY_HOME_PAGENUM';","import React, {Component}from 'react';\r\n\r\nclass Announcement extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let titleStyle = {\r\n            textAlign :'center',\r\n            fontWeight :'bold',\r\n            width : '100%',\r\n            height :'30px'\r\n        }\r\n\r\n        let contentStyle = {\r\n            width :'100%',\r\n            height : '80px'\r\n        }\r\n\r\n        let containerStyle = {\r\n            display : 'none',\r\n            padding : '20px 20px 20px 0px'\r\n        } \r\n\r\n        return (\r\n            <div style={containerStyle}>\r\n                <div style={titleStyle}>公告</div>\r\n                <div>地震预警四川省重点实验室主任、成都高新减灾研究所所长王暾博士表示，“村村响”接入地震预警功能，是在各地各级政府的授权下、相关单位紧密合作的结果，是打通地震预警“最后一公里”的重要渠道。</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Announcement;","import React, {Component} from 'react';\r\n\r\nclass LoadingTips extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n            loadState : 0 //0:begin, 1:loading, 2:down, 3:no data\r\n        }\r\n\r\n        this.getLoadingStringState = this.getLoadingStringState.bind(this);\r\n    }\r\n\r\n    getLoadingStringState(index = 0){\r\n        let loadingStringState = '加载中，请稍后... ...';\r\n\r\n        if (index === 1) {\r\n            loadingStringState = '加载中，请稍后......';\r\n        } else if (index === 2) {\r\n            loadingStringState = '加载完毕!'\r\n        } else {\r\n            loadingStringState = '别划拉了，我也是有底线的';\r\n        }\r\n\r\n        return loadingStringState;\r\n    }\r\n\r\n    render(){\r\n        let {loadState} = this.props;\r\n        let style = {\r\n            height: '50px',\r\n            textAlign: 'center',\r\n        }\r\n\r\n        return (\r\n            <div style={style}>{this.getLoadingStringState(loadState)}</div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default LoadingTips;","import React, { Component } from 'react';\r\nimport './Home.css';\r\nimport ListItem from './ListItem.js';\r\nimport $ from 'jquery';\r\nimport { connect } from 'react-redux';\r\nimport { beforeFetch, failFetch, successFetch, modifyPageNum} from '../../redux/action.js';\r\nimport PropTypes from 'prop-types';\r\nimport Announcement from './Announcement.js';\r\nimport LoadingTips from '../../components/LoadingTips.js';\r\n\r\n\r\nclass Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            homeContent : [],\r\n            loadState : 0,\r\n            pageNum : 0\r\n        };\r\n        this.lastScrollTime = 0;\r\n        this.scrollHandler = this.scrollHandler.bind(this);\r\n        this.fetchContent = this.fetchContent.bind(this);\r\n    }\r\n\r\n    scrollHandler() {\r\n        let conHeight = $('.content-container').height();\r\n        let winHeight = $(window).height();\r\n        let scrollTop = $(window).scrollTop();\r\n        let curTime = new Date();\r\n        if (150 + scrollTop >= conHeight - winHeight){\r\n            if(curTime - this.lastScrollTime < 500) return; \r\n            this.lastScrollTime = curTime;\r\n            this.fetchContent();\r\n        }\r\n    }\r\n\r\n    fetchContent() {\r\n        let url = `/Index/Index/subIndex?limit=8`;\r\n        let firstPageNum = 8;\r\n\r\n        if (this.state.pageNum === 0) {\r\n            url = `/Index/Index/subIndex?start=0&limit=${firstPageNum}`\r\n        } else {\r\n            let start = (this.state.pageNum - 1) * 5 + firstPageNum;\r\n            url = `/Index/Index/subIndex?start=${start}&limit=5`\r\n        }\r\n        this.setState({loadState : 1});\r\n        fetch(url, {\r\n            method: 'GET'\r\n        }).then(res => res.json()).then(\r\n            (data) => {\r\n                if(data.result.length === 0){\r\n                    this.setState({\r\n                        loadState: 3\r\n                    });\r\n                }else{\r\n                    let num = this.state.pageNum + 1;\r\n                    this.setState({\r\n                        loadState: 2,\r\n                        pageNum: num,\r\n                        homeContent: [...this.state.homeContent, ...data.result]\r\n                    });\r\n                }\r\n\r\n            }\r\n        )\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        console.log('will Unmount' + this.state.pageNum);\r\n        window.removeEventListener('scroll', this.scrollHandler);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        console.log('Did Unmount' + this.state.pageNum);\r\n        window.addEventListener('scroll', this.scrollHandler);\r\n\r\n        this.fetchContent(0);\r\n    }\r\n\r\n    render() {\r\n       \r\n        return (\r\n            <div>\r\n                <div className=\"content-container-left\" >\r\n\r\n                </div>\r\n                <div className=\"content-container\" >\r\n                    <div className=\"content-container-header\"></div>\r\n                    {this.state.homeContent.map(item => <ListItem key={item.uid} title={item.title} time={item.upload_time} tags={item.tags ? item.tags.split(\".\") : []} article_sub={item.article_sub} detailA={true} />)}\r\n                    <LoadingTips loadState={this.state.loadState}></LoadingTips>\r\n                </div>\r\n                <div className=\"content-container-right\" >\r\n                    <Announcement />\r\n                    <div className=\"content-container-right-ajax-test\" id=\"content-container-right-ajax-test\"></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// 定义方法mapStateToProps，参数为state，并且返回一个对象，对象内定义需要获取的store内的数据，\r\n// 由于是使用的countReducer中的数据，所以需要使用state.countReducer.属性名 \r\n// function mapStateToProps(state) {\r\n//     return {\r\n//         pageNum: state.pageReducer.pageNum,\r\n//         homeContent : state.fetchReducer.homeContent\r\n//     }\r\n// }\r\n\r\n// function mapDispatchToProps(dispatch, props) {\r\n//     return {\r\n//         modifyPageNum: (num) => dispatch(modifyPageNum(num)),\r\n//         fechContent: (pageNum)=>{\r\n//             // console.log(props);\r\n//             // if(props.homeContent){\r\n//             //     return ;\r\n//             // }\r\n//             let url = `/public/Index/Index/subIndex?limit=8`;\r\n//             let firstPageNum = 8;\r\n//             console.log(props);\r\n//             if (pageNum === 0) {\r\n//                 url = `/public/Index/Index/subIndex?start=0&limit=${firstPageNum}`\r\n//             } else {\r\n//                 let start = (pageNum - 1) * 5 + firstPageNum;\r\n//                 url = `/public/Index/Index/subIndex?start=${start}&limit=5`\r\n//             }\r\n//             //dispatch(beforeFetch());\r\n//             fetch(url, {\r\n//                 method: 'GET'\r\n//             }).then(res => res.json()).then(\r\n//                 (data) => {\r\n//                     pageNum = pageNum + 1;\r\n//                     dispatch(successFetch(data.result));\r\n//                 }\r\n//             )\r\n//         }\r\n//     }\r\n// }\r\n// Home.propTypes = {\r\n//     pageNum: PropTypes.number.isRequired,\r\n//     homeContent: PropTypes.array.isRequired,\r\n//     fechContent: PropTypes.func.isRequired,\r\n//     modifyPageNum: PropTypes.func.isRequired\r\n// }\r\n// connect的第一个参数为数据，即mapStateToProps方法\r\n// 接着在第二个括号内传入当前需要被改造的组件 \r\n//export default connect(mapStateToProps, mapDispatchToProps)(Home);\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport './components.css';\r\nclass ScrollDiv extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            clientHeight: document.documentElement.clientHeight-80,\r\n            clientWidth: document.documentElement.clientWidth\r\n        }\r\n\r\n        this.scrollTime = 0;\r\n        this.scrollHandler = this.scrollHandler.bind(this);\r\n        this.fetchContent = this.fetchContent.bind(this);\r\n    }\r\n\r\n    scrollHandler() {\r\n\r\n    }\r\n\r\n    fetchContent() {\r\n\r\n    }\r\n\r\n    render(){\r\n        let containerStyle = {\r\n            width: this.state.clientWidth,\r\n            height :this.state.clientHeight,\r\n            border : 'black',\r\n            overflow :'auto',\r\n            overflowX: 'hidden',\r\n            wordBreak: 'break-all',\r\n            \r\n        }\r\n\r\n        return (\r\n            <div className='scroll-div' style={containerStyle}>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ScrollDiv;","import React, {Component} from 'react';\r\nimport ScrollDiv from '../../components/ScrollDiv.js';\r\nclass About extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return(\r\n            <div>\r\n                <ScrollDiv />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default About;","import React, {Component} from 'react';\r\nimport './Article.css';\r\nimport ListItem from './../Home/ListItem.js';\r\nimport './../Home/Home.css';\r\n\r\n\r\nclass ArticleCon extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        //window.alert(window.location.href);\r\n    }\r\n\r\n    render(){\r\n\r\n        return (\r\n            <div className='article-con'>\r\n               <div className='article-con-article'>\r\n                    <ListItem title={\"sdsds\"} time={'2019-58-89'} tags={[\"呵呵\"]} article_sub={\"水电费润肤乳\"}/>\r\n               </div>\r\n               <div className='article-con-relate'>sfdf</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ArticleCon;","import React, { Component } from 'react';\r\n\r\nclass Life extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2>Life</h2>\r\n                <div></div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Life;","import React, { Component } from 'react';\r\nimport { HashRouter as Router, Route, Link, Switch } from \"react-router-dom\";\r\nimport Home from \"./pages/Home/Home.js\";\r\nimport About from \"./pages/About/About.js\";\r\nimport Life from \"./pages/Life/Life.js\";\r\nimport ArticleCon from \"./pages/Article/ArticleCon.js\";\r\nimport CacheRoute, { CacheSwitch } from 'react-router-cache-route'\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      navHide: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    if(window.location.hash.indexOf('article')>0){\r\n      this.setState({\r\n        navHide: true\r\n      });\r\n    }\r\n    //window.alert('new window' + window.location.href);\r\n\r\n    \r\n    window.addEventListener('hashchange', () => {\r\n      if (window.location.hash.indexOf('article') > 0) {\r\n        this.setState({\r\n          navHide: true\r\n        });\r\n      } else {\r\n        this.setState({\r\n          navHide: false\r\n        });\r\n      }\r\n      console.log('hash change' + window.location);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    let navStyle = {\r\n      position: 'fixed',\r\n      backgroundColor: '#15436b',\r\n      height: '70px',\r\n      width: '100%',\r\n      top: 0,\r\n      zIndex: 2,\r\n      textAlign: 'center',\r\n      boxShadow: '0px 2px 2px #888888'\r\n    }\r\n\r\n    let navHideStyle = {\r\n      height: '0px'\r\n    }\r\n\r\n    let contentContainerTopStyle = {\r\n      height: '70px',\r\n      width: '100%'\r\n    }\r\n    let contentContainerTopHideStyle = {\r\n      height: '0px',\r\n      width: '100%'\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <Router>\r\n          <div style={this.state.navHide ? navHideStyle : navStyle} className=\"nav-container\">\r\n            <div className=\"nav\">\r\n              <ul>\r\n                <li href=\"/\" className=\"tab-head-home tab-head\" >\r\n                  <Link to=\"/\">首页</Link>\r\n                </li>\r\n                {/* <li href=\"/\" className=\"tab-head-home tab-head\" >\r\n                  <Link to=\"/study\">学习</Link>\r\n                </li>\r\n                <li href=\"/\" className=\"tab-head-about tab-head\" >\r\n                  <Link to=\"/life\">杂碎</Link>\r\n                </li> */}\r\n                <li href=\"/\" className=\"tab-head-about tab-head\" >\r\n                  <Link to=\"/about\">更新记录</Link>\r\n                </li>\r\n                <li href=\"/\" className=\"tab-head-about tab-head\" >\r\n                  <Link className=\"item-hide\" to=\"/article\">Article</Link>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={this.state.navHide ? contentContainerTopHideStyle : contentContainerTopStyle} className=\"content-container-top\" ></div>\r\n          <CacheSwitch>\r\n            <CacheRoute exact saveScrollPosition={true} path=\"/\">\r\n              <Home />\r\n            </CacheRoute >\r\n            {/* <Route path=\"/study\">\r\n              <About />\r\n            </Route>\r\n            <Route path=\"/life\">\r\n              <Life />\r\n            </Route> */}\r\n            <Route path=\"/about\">\r\n              <About />\r\n            </Route>\r\n            <Route path=\"/Article\">\r\n              <ArticleCon />\r\n            </Route>\r\n          </CacheSwitch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {FETCH_FAIL, FETCH_SUCCESS, BEFORE_FETCH} from './actionTypes.js';\r\n\r\n// 定义初始化的数据，根据实际数据即可\r\nconst initializeState = {\r\n    homeContent: []\r\n}\r\n\r\n// 定义reducer，第一个参数为state，赋予默认值为上边定义的initializeState，\r\n// 第二个参数为action，并return一个state  \r\n// 并且抛出这个countReducer\r\nfunction fetchReducer(state = initializeState, action) {\r\n    switch (action.type) {\r\n        case FETCH_FAIL:\r\n            return { homeContent: []}\r\n        case FETCH_SUCCESS:\r\n            return { homeContent: action.homeContent}\r\n        case BEFORE_FETCH:\r\n            return { homeContent : []}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default fetchReducer;","import { MODIFY_HOME_PAGENUM } from './actionTypes.js';\r\n\r\nconst initialHomePageNum = {\r\n    pageNum : 0\r\n}\r\n\r\n\r\n// 定义reducer，第一个参数为state，赋予默认值为上边定义的initializeState，\r\n// 第二个参数为action，并return一个state  \r\n// 并且抛出这个countReducer\r\nfunction pageReducer(state = initialHomePageNum, action) {\r\n    switch (action.type) {\r\n        case MODIFY_HOME_PAGENUM:\r\n            return { pageNum: action.pageNum }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default pageReducer;\r\n","import {createStore, combineReducers, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport fetchReducer from './fetchReducer.js';\r\nimport pageReducer from './homePageNumReducer.js';\r\n// createStore方法是用来创建store的，combineReducers方法是用来合并多个reducer的\r\n\r\n// 创建根reducer，利用combineReducers合并多个reducer，此处还未定义reducer，所以暂空\r\nconst rootReducer = combineReducers({\r\n    fetchReducer, pageReducer\r\n});\r\n\r\n // 创建store，第一个参数是根reducer，第二个参数可以是初始化的state\r\nconst store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nexport default store;\r\n\r\n\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './App.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './redux/store'\n\nwindow.isProduct = true ;\n\nReactDOM.render(\n    <Provider store = {store}>\n        <App />\n    </Provider>\n    , document.getElementById('root'));\n\n    \n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}